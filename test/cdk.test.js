"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = require("aws-cdk-lib");
const assertions_1 = require("aws-cdk-lib/assertions");
const website_stack_1 = require("../lib/website-stack");
/* eslint-disable @typescript-eslint/no-var-requires */
require("dotenv").config({ path: ".env.test" });
describe("MyWebsiteAppStack", () => {
    const app = new cdk.App();
    const websiteStack = new website_stack_1.MyWebsiteAppStack(app, "PersonalWebsite", {
        env: {
            account: process.env.CDK_DEFAULT_ACCOUNT,
            region: process.env.CDK_DEFAULT_REGION,
        },
        environment: "test",
        domainName: process.env.DOMAIN_NAME || "",
        bucketName: process.env.BUCKET_NAME || "",
    });
    const template = assertions_1.Template.fromStack(websiteStack);
    console.log(JSON.stringify(template));
    test("S3 buckets created", () => {
        // One for website and one for CloudFront logs
        template.resourceCountIs("AWS::S3::Bucket", 2);
    });
    test("S3 bucket name is env variable", () => {
        template.hasResourceProperties("AWS::S3::Bucket", {
            BucketName: process.env.BUCKET_NAME,
        });
    });
    test("Lambda Functions Created", () => {
        // 1 each for Read and Create blog posts
        // 2 for replacing CNAME and A records
        template.resourceCountIs("AWS::Lambda::Function", 4);
        template.hasResourceProperties("AWS::Lambda::Function", {
            Handler: "create.handler",
            Runtime: "nodejs16.x",
        });
        template.hasResourceProperties("AWS::Lambda::Function", {
            Handler: "read.handler",
            Runtime: "nodejs16.x",
        });
    });
    test("ACM Certificate Created", () => {
        template.resourceCountIs("AWS::CertificateManager::Certificate", 1);
        template.hasResourceProperties("AWS::CertificateManager::Certificate", {
            DomainName: process.env.DOMAIN_NAME,
            SubjectAlternativeNames: ["*." + process.env.DOMAIN_NAME],
        });
    });
    const hostedZoneName = "testing.";
    test("Route53 HostedZone is present", () => {
        template.resourceCountIs("AWS::Route53::HostedZone", 1);
        template.hasResourceProperties("AWS::Route53::HostedZone", {
            Name: hostedZoneName,
        });
    });
    test("Route53 RecordSets Created", () => {
        template.resourceCountIs("AWS::Route53::RecordSet", 2);
        template.hasResourceProperties("AWS::Route53::RecordSet", {
            Name: ["www", process.env.DOMAIN_NAME, hostedZoneName].join("."),
            Type: "CNAME",
        });
        template.hasResourceProperties("AWS::Route53::RecordSet", {
            Name: [process.env.DOMAIN_NAME, hostedZoneName].join("."),
            Type: "A",
        });
    });
    test("Route53 RecordSet Deleted", () => {
        // CNAME and alias A
        template.resourceCountIs("Custom::DeleteExistingRecordSet", 2);
    });
    test("Cloudfront Distribution Created", () => {
        template.resourceCountIs("AWS::CloudFront::Distribution", 1);
        template.hasResourceProperties("AWS::CloudFront::Distribution", {
            DistributionConfig: assertions_1.Match.objectLike({
                Aliases: [process.env.DOMAIN_NAME, "www." + process.env.DOMAIN_NAME],
                CacheBehaviors: assertions_1.Match.anyValue(),
                CustomErrorResponses: [
                    {
                        ErrorCode: 403,
                        ResponseCode: 403,
                        ResponsePagePath: "/index.html",
                    },
                    {
                        ErrorCode: 404,
                        ResponseCode: 404,
                        ResponsePagePath: "/404.html",
                    },
                ],
                DefaultCacheBehavior: assertions_1.Match.anyValue(),
                Enabled: true,
                HttpVersion: "http2",
                IPV6Enabled: true,
                Logging: assertions_1.Match.anyValue(),
                ViewerCertificate: {
                    AcmCertificateArn: assertions_1.Match.anyValue(),
                    MinimumProtocolVersion: "TLSv1.2_2018",
                    SslSupportMethod: "sni-only",
                },
            }),
        });
    });
    test("Cloudfront ResponseHeadersPolicy Created", () => {
        template.resourceCountIs("AWS::CloudFront::ResponseHeadersPolicy", 1);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjZGsudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG1DQUFtQztBQUNuQyx1REFBeUQ7QUFDekQsd0RBQXlEO0FBRXpELHVEQUF1RDtBQUN2RCxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFFaEQsUUFBUSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtJQUNqQyxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUUxQixNQUFNLFlBQVksR0FBRyxJQUFJLGlDQUFpQixDQUFDLEdBQUcsRUFBRSxpQkFBaUIsRUFBRTtRQUNqRSxHQUFHLEVBQUU7WUFDSCxPQUFPLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUI7WUFDeEMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCO1NBQ3ZDO1FBQ0QsV0FBVyxFQUFFLE1BQU07UUFDbkIsVUFBVSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxJQUFJLEVBQUU7UUFDekMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxJQUFJLEVBQUU7S0FDMUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxRQUFRLEdBQUcscUJBQVEsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7SUFFbEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFFdEMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtRQUM5Qiw4Q0FBOEM7UUFDOUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNqRCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFH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UUFBUSxFQUFFO2dCQUNoQyxvQkFBb0IsRUFBRTtvQkFDcEI7d0JBQ0UsU0FBUyxFQUFFLEdBQUc7d0JBQ2QsWUFBWSxFQUFFLEdBQUc7d0JBQ2pCLGdCQUFnQixFQUFFLGFBQWE7cUJBQ2hDO29CQUNEO3dCQUNFLFNBQVMsRUFBRSxHQUFHO3dCQUNkLFlBQVksRUFBRSxHQUFHO3dCQUNqQixnQkFBZ0IsRUFBRSxXQUFXO3FCQUM5QjtpQkFDRjtnQkFDRCxvQkFBb0IsRUFBRSxrQkFBSyxDQUFDLFFBQVEsRUFBRTtnQkFDdEMsT0FBTyxFQUFFLElBQUk7Z0JBQ2IsV0FBVyxFQUFFLE9BQU87Z0JBQ3BCLFdBQVcsRUFBRSxJQUFJO2dCQUNqQixPQUFPLEVBQUUsa0JBQUssQ0FBQyxRQUFRLEVBQUU7Z0JBQ3pCLGlCQUFpQixFQUFFO29CQUNqQixpQkFBaUIsRUFBRSxrQkFBSyxDQUFDLFFBQVEsRUFBRTtvQkFDbkMsc0JBQXNCLEVBQUUsY0FBYztvQkFDdEMsZ0JBQWdCLEVBQUUsVUFBVTtpQkFDN0I7YUFDRixDQUFDO1NBQ0gsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsMENBQTBDLEVBQUUsR0FBRyxFQUFFO1FBQ3BELFFBQVEsQ0FBQyxlQUFlLENBQUMsd0NBQXdDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDeEUsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGNkayBmcm9tIFwiYXdzLWNkay1saWJcIjtcbmltcG9ydCB7IE1hdGNoLCBUZW1wbGF0ZSB9IGZyb20gXCJhd3MtY2RrLWxpYi9hc3NlcnRpb25zXCI7XG5pbXBvcnQgeyBNeVdlYnNpdGVBcHBTdGFjayB9IGZyb20gXCIuLi9saWIvd2Vic2l0ZS1zdGFja1wiO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzICovXG5yZXF1aXJlKFwiZG90ZW52XCIpLmNvbmZpZyh7IHBhdGg6IFwiLmVudi50ZXN0XCIgfSk7XG5cbmRlc2NyaWJlKFwiTXlXZWJzaXRlQXBwU3RhY2tcIiwgKCkgPT4ge1xuICBjb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpO1xuXG4gIGNvbnN0IHdlYnNpdGVTdGFjayA9IG5ldyBNeVdlYnNpdGVBcHBTdGFjayhhcHAsIFwiUGVyc29uYWxXZWJzaXRlXCIsIHtcbiAgICBlbnY6IHtcbiAgICAgIGFjY291bnQ6IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX0FDQ09VTlQsXG4gICAgICByZWdpb246IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX1JFR0lPTixcbiAgICB9LFxuICAgIGVudmlyb25tZW50OiBcInRlc3RcIixcbiAgICBkb21haW5OYW1lOiBwcm9jZXNzLmVudi5ET01BSU5fTkFNRSB8fCBcIlwiLFxuICAgIGJ1Y2tldE5hbWU6IHByb2Nlc3MuZW52LkJVQ0tFVF9OQU1FIHx8IFwiXCIsXG4gIH0pO1xuXG4gIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuZnJvbVN0YWNrKHdlYnNpdGVTdGFjayk7XG5cbiAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGVtcGxhdGUpKTtcblxuICB0ZXN0KFwiUzMgYnVja2V0cyBjcmVhdGVkXCIsICgpID0+IHtcbiAgICAvLyBPbmUgZm9yIHdlYnNpdGUgYW5kIG9uZSBmb3IgQ2xvdWRGcm9udCBsb2dzXG4gICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKFwiQVdTOjpTMzo6QnVja2V0XCIsIDIpO1xuICB9KTtcblxuICB0ZXN0KFwiUzMgYnVja2V0IG5hbWUgaXMgZW52IHZhcmlhYmxlXCIsICgpID0+IHtcbiAgICB0ZW1wbGF0ZS5oYXNSZXNvdXJjZVByb3BlcnRpZXMoXCJBV1M6OlMzOjpCdWNrZXRcIiwge1xuICAgICAgQnVja2V0TmFtZTogcHJvY2Vzcy5lbnYuQlVDS0VUX05BTUUsXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoXCJMYW1iZGEgRnVuY3Rpb25zIENyZWF0ZWRcIiwgKCkgPT4ge1xuICAgIC8vIDEgZWFjaCBmb3IgUmVhZCBhbmQgQ3JlYXRlIGJsb2cgcG9zdHNcbiAgICAvLyAyIGZvciByZXBsYWNpbmcgQ05BTUUgYW5kIEEgcmVjb3Jkc1xuICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcyhcIkFXUzo6TGFtYmRhOjpGdW5jdGlvblwiLCA0KTtcblxuICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcyhcIkFXUzo6TGFtYmRhOjpGdW5jdGlvblwiLCB7XG4gICAgICBIYW5kbGVyOiBcImNyZWF0ZS5oYW5kbGVyXCIsXG4gICAgICBSdW50aW1lOiBcIm5vZGVqczE2LnhcIixcbiAgICB9KTtcblxuICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcyhcIkFXUzo6TGFtYmRhOjpGdW5jdGlvblwiLCB7XG4gICAgICBIYW5kbGVyOiBcInJlYWQuaGFuZGxlclwiLFxuICAgICAgUnVudGltZTogXCJub2RlanMxNi54XCIsXG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoXCJBQ00gQ2VydGlmaWNhdGUgQ3JlYXRlZFwiLCAoKSA9PiB7XG4gICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKFwiQVdTOjpDZXJ0aWZpY2F0ZU1hbmFnZXI6OkNlcnRpZmljYXRlXCIsIDEpO1xuXG4gICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKFwiQVdTOjpDZXJ0aWZpY2F0ZU1hbmFnZXI6OkNlcnRpZmljYXRlXCIsIHtcbiAgICAgIERvbWFpbk5hbWU6IHByb2Nlc3MuZW52LkRPTUFJTl9OQU1FLFxuICAgICAgU3ViamVjdEFsdGVybmF0aXZlTmFtZXM6IFtcIiouXCIgKyBwcm9jZXNzLmVudi5ET01BSU5fTkFNRV0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IGhvc3RlZFpvbmVOYW1lID0gXCJ0ZXN0aW5nLlwiO1xuICB0ZXN0KFwiUm91dGU1MyBIb3N0ZWRab25lIGlzIHByZXNlbnRcIiwgKCkgPT4ge1xuICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcyhcIkFXUzo6Um91dGU1Mzo6SG9zdGVkWm9uZVwiLCAxKTtcblxuICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcyhcIkFXUzo6Um91dGU1Mzo6SG9zdGVkWm9uZVwiLCB7XG4gICAgICBOYW1lOiBob3N0ZWRab25lTmFtZSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdChcIlJvdXRlNTMgUmVjb3JkU2V0cyBDcmVhdGVkXCIsICgpID0+IHtcbiAgICB0ZW1wbGF0ZS5yZXNvdXJjZUNvdW50SXMoXCJBV1M6OlJvdXRlNTM6OlJlY29yZFNldFwiLCAyKTtcblxuICAgIHRlbXBsYXRlLmhhc1Jlc291cmNlUHJvcGVydGllcyhcIkFXUzo6Um91dGU1Mzo6UmVjb3JkU2V0XCIsIHtcbiAgICAgIE5hbWU6IFtcInd3d1wiLCBwcm9jZXNzLmVudi5ET01BSU5fTkFNRSwgaG9zdGVkWm9uZU5hbWVdLmpvaW4oXCIuXCIpLFxuICAgICAgVHlwZTogXCJDTkFNRVwiLFxuICAgIH0pO1xuXG4gICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKFwiQVdTOjpSb3V0ZTUzOjpSZWNvcmRTZXRcIiwge1xuICAgICAgTmFtZTogW3Byb2Nlc3MuZW52LkRPTUFJTl9OQU1FLCBob3N0ZWRab25lTmFtZV0uam9pbihcIi5cIiksXG4gICAgICBUeXBlOiBcIkFcIixcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdChcIlJvdXRlNTMgUmVjb3JkU2V0IERlbGV0ZWRcIiwgKCkgPT4ge1xuICAgIC8vIENOQU1FIGFuZCBhbGlhcyBBXG4gICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKFwiQ3VzdG9tOjpEZWxldGVFeGlzdGluZ1JlY29yZFNldFwiLCAyKTtcbiAgfSk7XG5cbiAgdGVzdChcIkNsb3VkZnJvbnQgRGlzdHJpYnV0aW9uIENyZWF0ZWRcIiwgKCkgPT4ge1xuICAgIHRlbXBsYXRlLnJlc291cmNlQ291bnRJcyhcIkFXUzo6Q2xvdWRGcm9udDo6RGlzdHJpYnV0aW9uXCIsIDEpO1xuXG4gICAgdGVtcGxhdGUuaGFzUmVzb3VyY2VQcm9wZXJ0aWVzKFwiQVdTOjpDbG91ZEZyb250OjpEaXN0cmlidXRpb25cIiwge1xuICAgICAgRGlzdHJpYnV0aW9uQ29uZmlnOiBNYXRjaC5vYmplY3RMaWtlKHtcbiAgICAgICAgQWxpYXNlczogW3Byb2Nlc3MuZW52LkRPTUFJTl9OQU1FLCBcInd3dy5cIiArIHByb2Nlc3MuZW52LkRPTUFJTl9OQU1FXSxcbiAgICAgICAgQ2FjaGVCZWhhdmlvcnM6IE1hdGNoLmFueVZhbHVlKCksXG4gICAgICAgIEN1c3RvbUVycm9yUmVzcG9uc2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgRXJyb3JDb2RlOiA0MDMsXG4gICAgICAgICAgICBSZXNwb25zZUNvZGU6IDQwMyxcbiAgICAgICAgICAgIFJlc3BvbnNlUGFnZVBhdGg6IFwiL2luZGV4Lmh0bWxcIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIEVycm9yQ29kZTogNDA0LFxuICAgICAgICAgICAgUmVzcG9uc2VDb2RlOiA0MDQsXG4gICAgICAgICAgICBSZXNwb25zZVBhZ2VQYXRoOiBcIi80MDQuaHRtbFwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIERlZmF1bHRDYWNoZUJlaGF2aW9yOiBNYXRjaC5hbnlWYWx1ZSgpLFxuICAgICAgICBFbmFibGVkOiB0cnVlLFxuICAgICAgICBIdHRwVmVyc2lvbjogXCJodHRwMlwiLFxuICAgICAgICBJUFY2RW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgTG9nZ2luZzogTWF0Y2guYW55VmFsdWUoKSxcbiAgICAgICAgVmlld2VyQ2VydGlmaWNhdGU6IHtcbiAgICAgICAgICBBY21DZXJ0aWZpY2F0ZUFybjogTWF0Y2guYW55VmFsdWUoKSxcbiAgICAgICAgICBNaW5pbXVtUHJvdG9jb2xWZXJzaW9uOiBcIlRMU3YxLjJfMjAxOFwiLFxuICAgICAgICAgIFNzbFN1cHBvcnRNZXRob2Q6IFwic25pLW9ubHlcIixcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KFwiQ2xvdWRmcm9udCBSZXNwb25zZUhlYWRlcnNQb2xpY3kgQ3JlYXRlZFwiLCAoKSA9PiB7XG4gICAgdGVtcGxhdGUucmVzb3VyY2VDb3VudElzKFwiQVdTOjpDbG91ZEZyb250OjpSZXNwb25zZUhlYWRlcnNQb2xpY3lcIiwgMSk7XG4gIH0pO1xufSk7XG4iXX0=